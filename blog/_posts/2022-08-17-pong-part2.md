---
title: "Building Pong in Your Terminal: Part Two"
categories:
  - Tutorials
toc: true
author: Josh

internal-links:
 - just an example
---

Let's start by adding Paddles. One should do to get us going. Let's create a file called `paddle.go`. Our paddle will be similar to our ball in that it will need an X and a Y position, and also a speed. We'll only be moving the paddles along the Y axis so for now we'll just set up a Yspeed. (Spoiler, we are going to replace most of this code later.)

```go
package main

type Paddle struct {
	X      int
	Y      int
	Yspeed int
}
```

Then we need to update our game struct to use the paddles. For now, our players will be paddles.

```go
type Game struct {
	Screen tcell.Screen
	Ball   Ball
	Player1 Paddle
	Player2 Paddle
}
```
And then we can create paddles and add them to our instance of Game inside our `main.go` file

```go
	player1 := Paddle {
        width:  1,
        height: 6,
        Y:      3,
        X:      5,
        Yspeed: 3,
	}

	player2 := Paddle {
        width:  1,
        height: 6,
        Y:      3,
        X:      5,
        Yspeed: 3,
	}

    game := Game{
		Screen:  s,
		Ball:    ball,
        Player1: player1,
		Player2: player2,
	}
```

Also similar to our ball, we'll need a way to display the paddle. **But this presents a problem**. Moving forward, let's choose to get excited by problems. Deal? Good, because this actually presents a bunch of problems. We'll tackle them one at a time. First, a quick review of how our ball object works.

Here is the code to display the ball:

```go
func (b *Ball) Display() rune {
	return "\u25CF"
}
```
It returns the unicode for a round dot that looks like the ball from Pong. Then, in our event loop in our `game.go` file, we can use the `tcell.Screen` to display it.

```go
	screen.SetContent(g.Ball.X, g.Ball.Y, g.Ball.Display(), nil, defStyle)
```
Remember that `SetContent` can only display one character at a time. No problem for our ball.
The problem is that our paddle isn't going to be one character. It needs to be several characters stacked on top of each other. Specifically, we want to use this character, &#x2588; , but multiple times. With our current setup, that would look something like this:

```go
	screen.SetContent(g.Paddle.X, g.Paddle.Y, g.Paddle.Display(), nil, defStyle)
	screen.SetContent(g.Paddle.X, g.Paddle.Y + 1, g.Paddle.Display(), nil, defStyle)
	screen.SetContent(g.Paddle.X, g.Paddle.Y + 2, g.Paddle.Display(), nil, defStyle)
	screen.SetContent(g.Paddle.X, g.Paddle.Y + 3, g.Paddle.Display(), nil, defStyle)
	screen.SetContent(g.Paddle.X, g.Paddle.Y + 3, g.Paddle.Display(), nil, defStyle)
```
No thank you.

To help us with this, and really anything we want to display that is larger than one character, we'll use a function. Luckily, the [tcell tutorial](https://github.com/gdamore/tcell/blob/master/TUTORIAL.md) offers a solution. In the form of this function. All I did was change the name. 

```go
func drawSprite(s tcell.Screen, x1, y1, x2, y2 int, style tcell.Style, text string) {
	row := y1
	col := x1

	for _, r := range []rune(text) {
		s.SetContent(col, row, r, nil, style)
		col++
		if col >= x2 {
			row++
			col = x1
		}
		if row > y2 {
			break
		}
	}
}
```

All this does is loop through a string and call `SetContent` for us on each character. I want to point out that we have two sets of coordinates. The first, x1 and y1, are like our starting position. The next set, x2 and y2, are where we want to end up. Moving forward, we can think of this as our width and our height for whatever we want to print to the screen. So with this in place, I can tell this function "Draw my paddle at position (2,3) and make it 1 character long and 7 characters high." This will make more sense as we go.

Let's take a look at a couple examples, because I think this interesting to understand, and I'm hoping someone more creative than me can come up with a better way to use this.

With this method, we still need to define our objects as one long string. We can use spaces along with a width and height to turn the string into a shape. So for example, I can make a house like this:

```go
```

## A Paddle, For Real This Time

This new setup isn't perfect, we'll need to do a couple of weird things to get it to work for us, but it's a huge improvement over calling `SetContent()` a bunch of times. Back in `paddle.go`, add the following:

```go
import strings

type Paddle struct {
    width  int
    height int
	X      int
	Y      int
	Yspeed int
}

func (p *Paddle) Display() string {
	return strings.Repeat("\u2588", p.height)
}
```

We've added a `width` and a `height` attribute to our struct, then we use it to determine how tall our paddle should be. Not that this alon will just return all the square characters in a long row like this:  &#x2588;&#x2588;&#x2588;&#x2588;. We'll need to tell `drawSprite` how to display it properly.

```go

```
{% picture content-wide-nocrop {{site.pimages}}{{page.slug}}/paddle.png --alt {{x and y access }} %}
<figcaption>A Paddle</figcaption>

## Getting Control
- Let's create a paddle and see if we can write some code to get it moving.
    - Refactor! - The draw text function.
        I wanted there to be a single way we put sprites on the screen. For the ball, it being one single character, we were fine with the standard way. With this new function, we can conceivable create more complex shapes. I can't, but someone else could.
- creating an eventChannel.
    - First we are only concerned with up and down, so that makes it easier.
    - we can listen for msg and react in our event loop
    - We'll send all key events from the main function into the game via this channel.

- Collision
    Refactor! Bodies
    What happens when the ball reaches the paddles.

- Refactor! Players
    - Players could be paddles, but then why would paddles have a score etc. Let's create a player2 and a paddle
    - And we also need to give them the ability to move. We'll assume for now we are playing on the same keyboard. w, s.
- Keeping score

- Game Over

- Looks





### Writing Article Checklist

- [ ] Write Outline
- [ ] Write Draft
- [ ] Fix Grammarly Errors
- [ ] Read out loud
- [ ] Write 5 or more titles and pick the best on
- [ ] First two paragraphs: What's it about? Why listen to you?
- [ ] Create header image in Canva
- [ ] Optional: Find ways to break up content with quotes or images
- [ ] Verify look of article locally
- [ ] Run mark down linter (`lint`)
- [ ] Add keywords for internal links to front-matter
- [ ] Run `link-opp` and find 1-5 places to incorporate links to other articles
- [ ] Add Earthly `CTA` at bottom `{% include cta/cta1.html %}`
- [ ] Raise PR

## Outside Article Checklist

- [ ] Add in Author page
- [ ] Create header image in Canva
- [ ] Optional: Find ways to break up content with quotes or images
- [ ] Verify look of article locally
  - Would any images look better `wide` or without the `figcaption`?
- [ ] Run mark down linter (`lint`)
- [ ] Add keywords for internal links to front-matter
- [ ] Run `link-opp` and find 1-5 places to incorporate links
- [ ] Add Earthly `CTA` at bottom `{% include cta/cta1.html %}`
