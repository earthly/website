---
title: "JQ Select Explained: Selecting elements from JSON with Examples"
categories:
  - Tutorials
toc: true
author: Adam
internal-links:
 - just an example
---
### Writing Article Checklist

- [ ] Write Outline
- [ ] Write Draft
- [ ] Fix Grammarly Errors
- [ ] Read out loud
- [ ] Write 5 or more titles and pick the best on
- [ ] First two paragraphs: What's it about? Why listen to you?
- [ ] Create header image in Canva
- [ ] Optional: Find ways to break up content with quotes or images
- [ ] Verify look of article locally
- [ ] Run mark down linter (`earthly +blog-lint-apply`)
- [ ] Add keywords for internal links to front-matter
- [ ] Run `earthly --build-arg NAME=2020-09-10-better-builds.md +link-opportunity` and find 1-5 places to incorporate links to other articles
- [ ] Raise PR


- Keyword: jq select
- Long tail keywords:
    - jq select multiple fields
    - jq select examples
    - jq select key value
    - jq remove quotes
    - jq filter by value
    - jq count
    - jq sort
    - jq json to csv
    - jq map
    - jq array
    - harder ones
        - what is jq
        - jq filter
        - 

Some shortcuts and command line tools I use so much that using them is just in my fingers. I don't have to remember how to use them, my fingers just know how. 

I hit save in VS Code all the time, despite the fact that VS Code autosaves. It's like a nervous tick: if I pause my typing my fingers hit Command-S. The shortcut for saving files is in my fingers[^1]. 

`git commit / git add` is similarly in my fingers. I often commit my work almost automatically when I reach a stopping point. Rebasing changes into my code is different. I have to think about it each time. It's in my head not my fingers.

However, some things never stick in my head nor in my fingers and I have to go to google every time. JQ is one of these. It's time to fix that. Let's go over selecting elements out of a JSON string using JQ in enough depth that it should stick in both my and your head.

## What is JQ
JQ is a lightweight, command-line JSON processor. It a single portable executabl. It's less than 1 MB is size but it is by no means a simple tool. To use JQ you construct one or more filters and JQ applies those filters to a JSON document. When I'm using JQ, it is primarily to select some subset of a json docuemtn or to perform some type of transformation and that is what I'll primarly cover here but its important to relalize that whatever you are doing in jq, you are doing it via creating and combining together filters. 

The simplest filter is the identity filter (`.`):

```
echo '{"key1":{"key2":"value1"}}' | jq '.'
{
  "key1": {
    "key2": "value1"
  }
}
```

<div class="notice">
**JQ is programming language**
`.` is called the identity filter because it's the identity function -- a function that always returns it's input (f(x)=x). In fact JQ filters are full functional programming language. To see what JQ can do checkout the JQ examples on [RossetaCode](http://rosettacode.org/wiki/Category:Jq).
</div>

## Using JQ to Select Elements
Let's start with selecting elements from a simple json document.
``` json
[
  {
    "key1": {
      "subkey1": "value1a",
      "subkey2": "value1b"
    }
  },
  {
    "key1": {
     "subkey1": "value1a",
      "subkey2": "value1b"
    }
  }
]
```
<figcaption>simple.json</figcaption>

We already know we can select the full document using `jq .`. From there we can drill further into the document by specifying a selector path:
``` json
$ jq '.[]' < simple.json 
{
  "key1": {
    "subkey1": "value1a",
    "subkey2": "value1b"
  }
}
{
  "key1": {
    "subkey1": "value1a",
    "subkey2": "value1b"
  }
}
```
<figcaption>Get Elements with the Array with `jq`</figcaption>

``` json
jq '.[].key1' < simple.json
{
  "subkey1": "value1a",
  "subkey2": "value1b"
}
{
  "subkey1": "value1a",
  "subkey2": "value1b"
}
```
<figcaption>Get only children of 'key1` with `jq`</figcaption>

```
jq '.[].key1.subkey1' < simple.json
"value1a"
"value1a"
```
<figcaption>Get only children of 'subkey1` with `jq`</figcaption>



![]({{site.images}}{{page.slug}}/0880.png)
<figcaption>Summary of selecting child elements with `jq`</figcaption>

# Prblems -> this is not valid JSON

# Using it to Select Multiple Fields
# Using the select function
# Selecting keys by values
# Selecting and counting
# Selecting and mapping
# Selecting and sorting
# Removing Quotes
# Selecting and Transforming with Map  
# 


Exmaple tutorials:
http://www.compciv.org/recipes/cli/jq-for-parsing-json/


[^1]: Automated behaviour is stored in your Basal ganglia. It just feels like its in my fingers because it fires at a level below my awareness. 